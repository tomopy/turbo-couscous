# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

schedules:
  - cron: "0 0 */14 * *"
    displayName: "Bi-monthly build"
    branches:
      include:
        - master
        - benchmarking

trigger:
- master
- benchmarking

pool:
  # vmImage: 'ubuntu-latest'
  name: Default
  demands:
    - CUDA_VERSION
    - Agent.OS -equals Linux

steps:

- checkout: self
  persistCredentials: true

# - script: echo Hello, world!
#   displayName: 'Run a one-line script'

# - script: |
#     echo Add other tasks to build, test, and deploy your project.
#     echo See https://aka.ms/yaml
#   displayName: 'Run benchmarks'
  
- script: |
    git clone https://github.com/tomopy/tomopy-benchmarks
    cd tomopy-benchmarks
    date > test.txt
    git config --global user.name "Dreycen Foiles"
    git config --global user.email "foilesdreycen@gmail.com"
    git add *
    git commit -m "test commit"
    git push https://$(USERNAME):$(PASSWORD)@github.com/tomopy/tomopy-benchmarks
  displayName: 'Update benchmarking data repository'
